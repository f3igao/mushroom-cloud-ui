(this["webpackJsonpmushroom-cloud-ui"]=this["webpackJsonpmushroom-cloud-ui"]||[]).push([[0],{115:function(e,t,n){"use strict";t.a=n.p+"static/media/algo_light.4f066c4c.svg"},12:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return b})),n.d(t,"o",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"j",(function(){return o})),n.d(t,"p",(function(){return h})),n.d(t,"q",(function(){return j})),n.d(t,"l",(function(){return S})),n.d(t,"n",(function(){return k})),n.d(t,"k",(function(){return A})),n.d(t,"m",(function(){return y}));var r,a,s,c,o,i="https://bridge.walletconnect.org",u="https://node.algoexplorerapi.io",l="https://node.testnet.algoexplorerapi.io",d="https://algoindexer.algoexplorerapi.io/",f="https://algoindexer.testnet.algoexplorerapi.io/",p="ipfs://",b="https://ipfs.io/ipfs/";function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function j(e){return e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}!function(e){e.MainNet="mainnet",e.TestNet="testnet"}(r||(r={})),function(e){e.Pending="pending",e.Active="active",e.Complete="complete"}(a||(a={})),function(e){e.Seller="seller",e.AssetIndex="asset_index",e.Price="price",e.ContractResult="contract_result",e.Status="status",e.IsMain="is_main",e.CreatedOn="created_on",e.UpdatedOn="updated_on"}(s||(s={})),function(e){e.AssetSaleContracts="asset_sale_contracts"}(c||(c={})),function(e){e.Production="production"}(o||(o={}));var m,x,v,O,g=n(49),w=n(50),S=w.a.button(m||(m=Object(g.a)(["\n  border-radius: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: none;\n  cursor: pointer;\n\n  &:hover {\n    opacity: 0.8;\n  }\n"]))),k=w.a.img(x||(x=Object(g.a)(["\n  max-width: 100%;\n  border-radius: 0.5rem;\n  border-style: solid;\n  border-width: 0.05rem;\n"]))),A=w.a.div(v||(v=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0 1rem 2rem 1rem;\n  overflow-wrap: break-word;\n"]))),y=w.a.img(O||(O=Object(g.a)(["\n  height: 1rem;\n  margin-left: 0.2rem;\n"])))},200:function(e,t,n){"use strict";(function(e){var r=n(41),a=n(3),s=n(1),c=n(2),o=n(9),i=n(10),u=n(0),l=n.n(u),d=n(57),f=n(22),p=n(5),b=n.n(p),h=n(15),j=n(115),m=n(217),x=n(201),v=n(202),O=n(203),g=n(12),w=n(6),S={fetching:!1,contract:null,price:-1,owner:"",assetInfo:null,imageSrc:"",description:"",status:null},k=function(t){Object(o.a)(u,t);var n=Object(i.a)(u);function u(t){var c;return Object(s.a)(this,u),(c=n.call(this,t)).contractService=new v.a,c.transactionService=new O.a,c.setAsset=function(){var e=Object(a.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.props,r=n.chainService,a=n.firebaseService,c.setState({fetching:!0}),r.indexer.lookupAssetByID(t).do().then((function(e){var t=e.asset.params;c.setState({assetInfo:t,fetching:!1}),c.setAssetMetadata(t.url)})).catch((function(e){console.error(e)})),r.indexer.lookupAssetBalances(t).do().then((function(e){var t=e.balances.find((function(e){return e.amount}));c.setState({owner:t.address})})),a.getContractForAsset(t).then((function(e){c.setState({contract:e,price:null===e||void 0===e?void 0:e.data()[g.e.Price],status:null===e||void 0===e?void 0:e.data()[g.e.Status]})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.sellAsset=function(){var e=Object(a.a)(l.a.mark((function e(t){var n,r,a,s,o,i,u,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.props,r=n.address,a=n.assetIndex,s=n.firebaseService,o=n.chainService,!r||!t){e.next=21;break}return c.setState({fetching:!0}),e.prev=3,e.next=6,c.contractService.generateAssetSaleContract(r,a,t);case 6:return i=e.sent,u=i.result,e.next=10,s.addDocument(g.d.AssetSaleContracts,{seller:r,asset_index:a,price:t,contract_result:u,status:g.o.Pending,is_main:o.isMainNet,created_on:Object(d.i)()});case 10:return f=e.sent,e.next=13,c.transactionService.sellAsset({seller:r,assetIndex:a,contractResult:u});case 13:s.updateDocument(g.d.AssetSaleContracts,f.id,{status:g.o.Active,updated_on:Object(d.i)()}),c.setState({contract:f,status:g.o.Active,price:t}),e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(3),e.t0;case 20:c.setState({fetching:!1});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),c.buyAsset=Object(a.a)(l.a.mark((function e(){var t,n,r,a,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.props,n=t.connector,r=t.address,a=t.assetIndex,r){e.next=4;break}return n.createSession(),e.abrupt("return");case 4:return e.next=6,c.getContractSig();case 6:if(s=e.sent,o=c.state.contract.data()[g.e.Seller],i=c.state.contract.data()[g.e.Price],!(s&&o&&i)){e.next=22;break}return c.setState({fetching:!0}),e.prev=11,e.next=14,c.transactionService.buyAsset({buyer:r,seller:o,assetIndex:a,price:i,contractSig:s});case 14:c.props.firebaseService.updateDocument(g.d.AssetSaleContracts,c.state.contract.id,{status:g.o.Complete,updated:Object(d.i)(),buyer:r}),c.setState({contract:null,status:g.o.Complete}),e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(11),e.t0;case 21:c.setState({fetching:!1});case 22:case"end":return e.stop()}}),e,null,[[11,18]])}))),c.getContractSig=Object(a.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.state.contract.data()[g.e.ContractResult],r=new Uint8Array(e.from(n,"base64")),t.abrupt("return",new f.LogicSigAccount(r));case 3:case"end":return t.stop()}}),t)}))),c.setAssetMetadata=function(){var e=Object(a.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.replace(g.h,g.i),e.next=3,c.contractService.getAssetMetadataFromIpfs(n);case 3:r=e.sent,a=r.image.replace(g.h,g.i),c.setState({description:r.description,imageSrc:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.state=Object(r.a)({},S),c.setAsset(c.props.assetIndex),c}return Object(c.a)(u,[{key:"render",value:function(){var e=this,t=this.state.assetInfo;return t&&Object(w.jsxs)("div",{className:"pv5-ns ph6-ns pt4",children:[Object(w.jsx)("p",{className:"f3 b",children:t.name}),Object(w.jsxs)("div",{className:"flex flex-row-ns flex-column justify-between",children:[Object(w.jsxs)("div",{className:"w-40-ns",children:[Object(w.jsx)(g.n,{src:this.state.imageSrc,alt:"nft"}),Object(w.jsx)("div",{className:"mt3",children:function(){var n=(null===t||void 0===t?void 0:t.creator)===e.props.address,r=e.state.contract;return e.state.status===g.o.Complete?Object(w.jsx)(g.l,{disabled:!0,className:"w-100",children:Object(w.jsxs)("div",{className:"flex justify-center",children:[Object(w.jsxs)("span",{className:"white",children:["Sold for ",Object(g.q)(e.state.price)]}),Object(w.jsx)(g.m,{src:j.a,alt:"algos"})]})}):n?r?Object(w.jsx)(g.l,{disabled:!0,className:"w-100",children:Object(w.jsxs)("div",{className:"flex justify-center",children:[Object(w.jsxs)("span",{className:"white",children:["On Sale for ",Object(g.q)(e.state.price)]}),Object(w.jsx)(g.m,{src:j.a,alt:"algos"})]})}):Object(w.jsx)(x.a,{sellAsset:e.sellAsset}):r?Object(w.jsx)(m.a,{address:e.props.address,price:e.state.price,buyAsset:e.buyAsset}):Object(w.jsx)(g.l,{disabled:!0,className:"w-100",children:"Not on Sale"})}()})]}),Object(w.jsxs)("div",{className:"w-50-ns mt0-ns mt4",children:[Object(w.jsxs)(g.k,{children:[Object(w.jsx)("span",{className:"b mb2 f6 light-red",children:"owner"}),Object(w.jsx)("span",{children:this.state.owner})]}),this.state.description&&Object(w.jsxs)(g.k,{children:[Object(w.jsx)("span",{className:"b mb2 f6 light-red",children:"description"}),Object(w.jsx)("span",{children:this.state.description})]}),Object(w.jsxs)(g.k,{children:[Object(w.jsx)("span",{className:"b mb2 f6 light-red",children:"url"}),Object(w.jsx)("span",{children:t.url})]}),Object(w.jsxs)(g.k,{children:[Object(w.jsx)("span",{className:"b mb2 f6 light-red",children:"creator"}),Object(w.jsx)("span",{children:t.creator})]})]})]})]})}}]),u}(b.a.Component);t.a=function(e){var t=Object(h.h)();return Object(w.jsx)(k,Object(r.a)(Object(r.a)({},e),{},{assetIndex:Number(t.index)}))}}).call(this,n(24).Buffer)},201:function(e,t,n){"use strict";var r=n(1),a=n(2),s=n(9),c=n(10),o=n(5),i=n.n(o),u=n(12),l=n(6),d=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={price:-1},e.onSellAsset=function(){return e.props.sellAsset(e.state.price)},e.onInputChange=function(t){var n,r=null!==(n=parseInt(t.target.value))&&void 0!==n?n:-1;e.setState({price:r})},e}return Object(a.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{className:"mv3 w-100 flex items-center justify-between",children:[Object(l.jsx)("input",{className:"pa2 ba br2 w-60",type:"number",min:"1",step:"1",name:"price",onChange:this.onInputChange,required:!0,placeholder:"Price in Algo"}),Object(l.jsx)(u.l,{className:"w-third pointer",onClick:this.onSellAsset,children:"Put on Sale"})]})}}]),n}(i.a.Component);t.a=d},202:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=n(2),s=n(1),c=n(0),o=n.n(c),i=Object(a.a)((function e(){Object(s.a)(this,e),this.generateAssetSaleContract=function(){var e=Object(r.a)(o.a.mark((function e(t,n,r){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="https://us-central1-".concat("mushroom-cloud-api",".cloudfunctions.net/asset_sale_contract?seller=").concat(t,"&asset=").concat(n,"&price=").concat(r),e.next=4,fetch(a);case 4:return s=e.sent,e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),this.getAssetMetadataFromIpfs=function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",fetch(t).then((function(e){return null===e||void 0===e?void 0:e.json()})));case 4:throw e.prev=4,e.t0=e.catch(0),e.t0;case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()}))},203:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(3),a=n(2),s=n(1),c=n(0),o=n.n(c),i=n(22),u=n.n(i),l=n(59),d=n(83),f=Object(a.a)((function t(){var n=this;Object(s.a)(this,t),this.algod=(new l.a).algod,this.walletService=new d.a,this.sendAndConfirm=function(){var e=Object(r.a)(o.a.mark((function e(t){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.algod.sendRawTransaction(t).do();case 3:return r=e.sent,console.log("sentTxns",r),e.next=7,u.a.waitForConfirmation(n.algod,r.txId,4);case 7:return a=e.sent,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),this.sellAsset=function(){var t=Object(r.a)(o.a.mark((function t(r){var a,s,c,l,d,f,p,b,h,j,m,x;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.seller,s=r.assetIndex,c=r.contractResult,t.prev=1,l=new Uint8Array(e.from(c,"base64")),d=new i.LogicSigAccount(l),t.next=6,n.algod.getTransactionParams().do();case 6:return f=t.sent,p=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:a,to:d.address(),amount:5e5,suggestedParams:f}),b=u.a.makeAssetTransferTxnWithSuggestedParamsFromObject({from:d.address(),to:d.address(),amount:0,assetIndex:s,suggestedParams:f}),h=u.a.makeAssetTransferTxnWithSuggestedParamsFromObject({from:a,to:d.address(),assetIndex:s,amount:1,suggestedParams:f}),j=u.a.assignGroupID([p,b,h]),t.next=13,n.walletService.sign(j);case 13:return(m=t.sent)[1]=u.a.signLogicSigTransactionObject(j[1],d).blob,t.next=17,n.sendAndConfirm(m);case 17:return x=t.sent,t.abrupt("return",x);case 21:throw t.prev=21,t.t0=t.catch(1),t.t0;case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}(),this.buyAsset=function(){var e=Object(r.a)(o.a.mark((function e(t){var r,a,s,c,i,l,d,f,p,b,h,j,m,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.buyer,a=t.seller,s=t.assetIndex,c=t.price,i=t.contractSig,e.prev=1,e.next=4,n.algod.getTransactionParams().do();case 4:return d=e.sent,f=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:r,to:a,amount:1e6*c*.9,suggestedParams:d}),p=u.a.makeAssetTransferTxnWithSuggestedParamsFromObject({from:r,to:r,amount:0,assetIndex:s,suggestedParams:d}),b=u.a.makeAssetTransferTxnWithSuggestedParamsFromObject({from:i.address(),to:r,amount:1,assetIndex:s,closeRemainderTo:r,suggestedParams:d}),h=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:i.address(),to:a,amount:0,closeRemainderTo:a,suggestedParams:d}),j=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:r,to:null!==(l="OBVRRZENURKIN7QSSCGXAQ3Y642BLMGXZWJUQTHW7WWKY5DINHE3GYRBTU")?l:"",amount:1e6*c*.1,suggestedParams:d}),m=u.a.assignGroupID([f,p,b,h,j]),e.next=13,n.walletService.sign(m);case 13:return(x=e.sent)[2]=u.a.signLogicSigTransactionObject(m[2],i).blob,x[3]=u.a.signLogicSigTransactionObject(m[3],i).blob,e.next=18,n.sendAndConfirm(x);case 18:return e.abrupt("return",e.sent);case 21:throw e.prev=21,e.t0=e.catch(1),e.t0;case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}()}))}).call(this,n(24).Buffer)},217:function(e,t,n){"use strict";var r=n.p+"static/media/algo_dark.325d1e4a.svg",a=n(12),s=n(6);t.a=function(e){var t=e.address,n=e.price,c=e.buyAsset;return Object(s.jsx)(a.l,{className:"w-100",onClick:c,disabled:!t,children:t?Object(s.jsxs)("div",{className:"flex justify-center",children:[Object(a.q)(n),Object(s.jsx)(a.m,{src:r,alt:"algos"})]}):Object(s.jsx)("span",{children:"Connect Wallet to Purchase"})})}},223:function(e,t,n){},225:function(e,t,n){},247:function(e,t){},249:function(e,t){},261:function(e,t){},263:function(e,t){},290:function(e,t){},291:function(e,t){},297:function(e,t){},299:function(e,t){},317:function(e,t){},377:function(e,t,n){"use strict";n.r(t);var r,a=n(5),s=n.n(a),c=n(196),o=n.n(c),i=(n(223),n(41)),u=n(3),l=n(1),d=n(2),f=n(9),p=n(10),b=n(0),h=n.n(b),j=n(214),m=n(15),x=(n(225),n(49)),v=n(50),O=n.p+"static/media/logo.21e62254.svg",g=n(12),w=n(6),S=v.a.span(r||(r=Object(x.a)(["\n  color: aqua;\n"]))),k=function(e){var t=e.address,n=e.connector,r=e.killSession,a=function(){var e=Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.createSession());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"flex items-center justify-between sans-serif",children:[Object(w.jsxs)("div",{className:"flex items-center w-50",children:[Object(w.jsx)("img",{src:O,className:"app-logo mr2",alt:"logo"}),Object(w.jsx)("span",{className:"f4",children:"Mushroom Cloud NFT"})]}),t?Object(w.jsxs)("div",{className:"flex flex-column tr",children:[Object(w.jsx)(S,{children:Object(g.p)(t)}),Object(w.jsx)("span",{className:"pointer-fade f6",onClick:r,children:"Disconnect"})]}):Object(w.jsx)(g.l,{onClick:a,children:"Connect Wallet"})]})},A=n(200),y=function(){return Object(w.jsxs)("div",{className:"vh-75 flex flex-column justify-center",children:[Object(w.jsx)("h1",{children:"Mushroom Cloud LA / Proximities"}),Object(w.jsx)("h2",{children:"by Nancy Baker Cahill"})]})},C=n(59),N=n(216),I=n(213),P=n(20),T={apiKey:"AIzaSyBVm40DDVu0VgoySUOe_4aJ1JPbaY2WRp0",authDomain:"mushroom-cloud-apifirebaseapp.com",projectId:"mushroom-cloud-api",storageBucket:"mushroom-cloud-apiappspot.com",messagingSenderId:"138191449972",appId:"1:138191449972:web:e9ab144c0b4bc016cb0621"},D=Object(d.a)((function e(){var t=this;Object(l.a)(this,e),this.currentAccountData={},this.chainService=new C.a,this.setup=function(){var e=Object(u.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.account,Object(I.a)(T),Object(N.a)(),!r){e.next=10;break}return e.next=6,t.getDocument("accounts",r);case 6:a=e.sent,t.currentAccountData=a.exists()?a.data():{},e.next=11;break;case 10:t.currentAccountData={};case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addDocument=function(){var e=Object(u.a)(h.a.mark((function e(t,n){var r,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(P.g)(),a=Object(P.b)(r,t),e.next=4,Object(P.a)(a,n);case 4:return s=e.sent,e.next=7,Object(P.e)(s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getDocument=function(){var e=Object(u.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(P.g)(),a=Object(P.d)(r,t,n),e.next=4,Object(P.e)(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.updateDocument=function(){var e=Object(u.a)(h.a.mark((function e(t,n,r){var a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(P.g)(),s=Object(P.d)(a,t,n),e.next=4,Object(P.i)(s,r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.deleteDocument=function(){var e=Object(u.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(P.g)(),a=Object(P.d)(r,t,n),e.next=4,Object(P.c)(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getContractForAsset=function(){var e=Object(u.a)(h.a.mark((function e(t){var n,r,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(P.g)(),r=Object(P.b)(n,g.d.AssetSaleContracts),a=Object(P.h)(r,Object(P.j)(g.e.AssetIndex,"==",t),Object(P.j)(g.e.Status,"==",g.o.Active)),e.next=5,Object(P.f)(a);case 5:if(!((s=e.sent).docs.length>0&&s.docs[0].exists())){e.next=10;break}return e.abrupt("return",s.docs[0]);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getContractsForSeller=function(){var e=Object(u.a)(h.a.mark((function e(n){var r,a,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(P.g)(),a=Object(P.b)(r,g.d.AssetSaleContracts),s=Object(P.h)(a,Object(P.j)(g.e.Seller,"==",n),Object(P.j)(g.e.Status,"==",g.o.Active),Object(P.j)(g.e.IsMain,"==",t.chainService.isMainNet)),e.next=5,Object(P.f)(s);case 5:return c=e.sent,e.abrupt("return",c.docs);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),F={connector:(new(n(83).a)).connector,firebaseService:new D,chainService:new C.a,address:"",connected:!1,accounts:[],fetching:!1},_=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).setupFirebase=Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.state.firebaseService.setup({account:r.state.address});case 2:case"end":return e.stop()}}),e)}))),r.subscribeToWalletEvents=Object(u.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state.connector){e.next=3;break}return e.abrupt("return");case 3:t.on("connect",(function(e,t){if(window.location.reload(),console.log("connector.on('connect')"),e)throw e;r.onConnect(t)})),t.on("session_update",function(){var e=Object(u.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("connector.on('session_update')"),!t){e.next=3;break}throw t;case 3:a=n.params[0].accounts,r.onSessionUpdate(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t.on("disconnect",(function(e,t){if(console.log("connector.on('disconnect')"),e)throw e;r.onDisconnect()})),t.connected&&(n=t.accounts,r.setState({connected:!0,accounts:n,address:n[0]}),r.onSessionUpdate(n)),r.setState({connector:t});case 8:case"end":return e.stop()}}),e)}))),r.onConnect=function(e){var t=e.params[0].accounts;r.setState({connected:!0,accounts:t,address:t[0]})},r.onSessionUpdate=function(e){r.setState({accounts:e,address:e[0]})},r.onDisconnect=function(){r.setState(Object(i.a)({},F))},r.killSession=function(){var e=r.state.connector;e&&e.killSession(),r.setState(Object(i.a)({},F))};var a=F.connector,s=a.connected,c=a.accounts;return r.state=Object(i.a)(Object(i.a)({},F),{},{connected:s,accounts:c,address:c[0]}),r.subscribeToWalletEvents(),r.setupFirebase(),console.log("on mainnet:",r.state.chainService.isMainNet),r}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.connector,n=e.firebaseService,r=e.chainService,a=e.address;return Object(w.jsxs)("div",{className:"code",children:[Object(w.jsx)(k,{address:a,connector:t,killSession:this.killSession}),Object(w.jsx)(j.a,{basename:"/mushroom-cloud-ui",children:Object(w.jsxs)(m.d,{children:[Object(w.jsx)(m.b,{path:"/",element:Object(w.jsx)(y,{})}),Object(w.jsx)(m.b,{path:"/asset/:index",element:Object(w.jsx)(A.a,{chainService:r,firebaseService:n,address:a,connector:t})}),Object(w.jsx)(m.b,{path:"*",element:Object(w.jsx)(m.a,{to:"/",replace:!0})})]})})]})}}]),n}(s.a.Component),M=_,W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,379)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};o.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(M,{})}),document.getElementById("root")),W()},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),a=n(1),s=n(22),c=n(12),o=Object(r.a)((function e(){Object(a.a)(this,e),this.isMainNet="production"===c.j.Production,this.algodHost=this.isMainNet?c.a:c.b,this.algod=new s.Algodv2("",this.algodHost,""),this.indexerHost=this.isMainNet?c.f:c.g,this.indexer=new s.Indexer("",this.indexerHost,"")}))},83:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(3),a=n(2),s=n(1),c=n(0),o=n.n(c),i=n(204),u=n(215),l=n(212),d=n.n(l),f=n(22),p=n.n(f),b=n(12),h=Object(a.a)((function t(){var n=this;Object(s.a)(this,t),this.connector=new u.a({bridge:b.c,qrcodeModal:d.a}),this.sign=function(){var t=Object(r.a)(o.a.mark((function t(r){var a,s,c,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.map((function(t){var r={txn:e.from(p.a.encodeUnsignedTransaction(t)).toString("base64")};return n.connector.accounts.includes(t.from)&&(r.signers=[]),r})),s=Object(i.formatJsonRpcRequest)("algo_signTxn",[a]),t.next=4,n.connector.sendCustomRequest(s);case 4:return c=t.sent,u=c.map((function(t){return t?new Uint8Array(e.from(t,"base64")):null})),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))}).call(this,n(24).Buffer)}},[[377,1,2]]]);
//# sourceMappingURL=main.95916ec3.chunk.js.map